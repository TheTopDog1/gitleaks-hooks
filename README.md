# gitleaks-hooks

#### –ù–∞ –≤–∞—à—ñ–π —Å–∏—Å—Ç–µ–º—ñ –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ:
- cURL
- python3
- git

–î–ª—è –ø—Ä–∏–∫–ª–∞–¥—É, –∞–±–∏ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —Ü—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –Ω–∞ Linux –∞–±–æ MacOS, –≤–∞—Ä—Ç–æ –≤–∏–∫–æ–Ω–∞—Ç–∏:
```shell
apt-get update && \
apt-get install -y python3 python3-pip git curl
```

## –Ø–∫ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å–∫—Ä–∏–ø—Ç
1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å —É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –≤–∞—à–æ–≥–æ Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é –≤ —è–∫–æ–º—É –±–∞–∂–∞—î—Ç–µ –∑–¥—ñ–π—Å–Ω–∏—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å "—Å–µ–∫—Ä–µ—Ç—ñ–≤"
2. –í–∏–∫–æ–Ω–∞–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```shell
curl -sL https://raw.githubusercontent.com/TheTopDog1/gitleaks-hooks/main/pre-commit-hook-implementation.py | python3 -
```
–ü—Ä–∏ —Ü—å–æ–º—É, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
- –±—É–¥–µ –≤–∏–∑–Ω–∞—á–µ–Ω–æ, —è–∫–∞ –Ω–∞ —Ö–æ—Å—Ç—ñ –æ–ø–µ—Ä–∞—Ü—ñ–π–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —Ç–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞
- —è–∫—â–æ –±—ñ–Ω–∞—Ä–Ω–∏–π —Ñ–∞–π–ª GitLeaks –Ω–µ –±—É–≤ —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–∏–π –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π —Ä–∞–Ω—ñ—à–µ, –π–æ–≥–æ –±—É–¥–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ `<git_root_directory>/.git/hooks/gitleaks-hooks/gitleaks`
- —è–∫—â–æ —Ä–∞–Ω—ñ—à–µ –Ω–µ –±—É–ª–æ —Å–∫–æ–Ω—Ñ—ñ–≥—É—Ä–æ–≤–∞–Ω–æ `pre-commit`-—Ö—É–∫ -- –≤—ñ–¥–±—É–¥–µ—Ç—å—Å—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏—Å—Ç–∞–≤–ª—è—î –æ–ø—Ü—ñ—é:
```shell
git config --bool devsecops.gitleaks.enabled true
```
–ü–µ—Ä–µ–¥ –∫–æ–∂–Ω–∏–º –∫–æ–º–º—ñ—Ç–æ–º, —Å–∫—Ä–∏–ø—Ç, —è–∫–∏–π –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è `pre-commit`-—Ö—É–∫–æ–º –≤–∏–∫–æ–Ω—É—î GitLeaks-–ø–µ—Ä–µ–≤—ñ—Ä–∫—É –ª–∏—à–µ —É –≤–∏–ø–∞–¥–∫—É, —è–∫—â–æ —Ü—è –æ–ø—Ü—ñ—è –ø—Ä–∏—Å—É—Ç–Ω—è —Ç–∞ –≤–∏—Å—Ç–∞–≤–ª–µ–Ω–∞ –≤ `true`
–í–∏–º–∫–Ω—É—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –ø–µ—Ä–µ–¥ –∫–æ–º—ñ—Ç–æ–º –º–æ–∂–Ω–∞ –∫–æ–º–∞–Ω–¥–æ—é:
```shell
git config --bool devsecops.gitleaks.enabled false
```

Note: 
GitLeaks –≤—Å—Ç–∞–≤–Ω–æ–≤–ª—é—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –æ–¥–∏–Ω —Ä–∞–∑ -- –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É `pre-commit`-—Ö—É–∫—É.
–û–¥–Ω–∞–∫, —è–∫—â–æ –∑ —è–∫–∏—Ö–æ—Å—å –ø—Ä–∏—á–∏–Ω, –π–æ–≥–æ –±—É–ª–æ –≤–∏–¥–∞–ª–µ–Ω–æ, –Ω–∞—Å—Ç—É–ø–Ω–∏–π `pre-commit`-—Ö—É–∫ —ñ–Ω—ñ—Ü—ñ—é—î –ø–æ–≤—Ç–æ—Ä–Ω–µ –≤—Å—Ç–∞–≤–Ω–æ–≤–ª–µ–Ω–Ω—è

## –Ø–∫ –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—å, —â–æ –≤—Å–µ –ø—Ä–∞—Ü—é—î:
1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –±—É–¥—å-—è–∫–æ–≥–æ –Ω–∞—è–≤–Ω–∏–π Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é:
```shell
git clone https://gitlab.com/TheTopDog1/kbot && cd kbot
```
2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å GitLeaks —Ç–∞ —Å–∫–æ–Ω—Ñ—ñ–≥—É—Ä—É–π—Ç–µ Git –≤–∏–∫–æ–Ω–∞–≤—à–∏ –∫–æ–º–∞–Ω–¥—É
```shell
curl -sL https://raw.githubusercontent.com/TheTopDog1/gitleaks-hooks/main/pre-commit-hook-implementation.py | python3 -
```
–£–≤–∞–≥–∞, –ø–µ—Ä–µ–¥ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è–º –∫–æ–º–∞–Ω–¥–∏, –≤–∞—Ä—Ç–æ –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—å, —â–æ –Ω–∞ —Ö–æ—Å—Ç—ñ –ø—Ä–∏—Å—É–Ω—Ç—ñ –Ω–∞—Å—Ç—É–ø–Ω—ñ –ø–∞–∫–µ—Ç–∏:
- cURL
- python3
- git

<br>
–î–ª—è –ø—Ä–∏–∫–ª–∞–¥—É, –∞–±–∏ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —Ü—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –Ω–∞ Linux –∞–±–æ MacOS, –≤–∞—Ä—Ç–æ –≤–∏–∫–æ–Ω–∞—Ç–∏:
```shell
apt-get update && \
apt-get install -y python3 python3-pip git curl
```
3. –£ —Å–≤–æ—î–º—É –ø—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π —Å—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π —Ñ–∞–π–ª, —è–∫–∏–π –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —à–∞–±–ª–æ–Ω–∞–º —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è GitLeaks, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `secrets.txt` —á–∏ `config.ini` —ñ —Ç.–ø. –ù–∞–ø–æ–≤–Ω—ñ—Ç—å —Ü–µ–π —Ñ–∞–π–ª –∫–æ–º–ø—Ä–æ–º–µ—Ç—É—é—á–∏–º–∏ –¥–∞–Ω–∏–º–∏:
```shell
echo 'aws_key:ghp_S9YLct5NEuk59MgtW0b2COV1k_FOO_BAR' > secrets.txt && git add secrets.txt
```
4. –ë—É–¥—å —è–∫–∞ —Å–ø—Ä–æ–±–∞ –∑–±–µ—Ä–µ–≥—Ç–∏ –∫–æ–º–ø—Ä–æ–º–µ—Ç—É—é—á—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –≤ Git –±—É–¥–µ –º–∞—Ä–Ω–æ—é)
```shell
git commit -m "added secret"
```
5. –Ø–∫—â–æ –í–∏ –≤—Å–µ –∂ —Ö–æ—á–µ—Ç–µ –∑–¥—ñ–π—Å–Ω–∏—Ç–∏ –∫–æ–º—ñ—Ç, –≤–∞—Ä—Ç–æ –∑–¥—ñ–π—Å–Ω–∏—Ç–∏ –ø–µ—Ä–µ–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é Git (—â–æ –¥—É–∂–µ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è üôÇ):
```shell
git config --bool devsecops.gitleaks.enabled false
```

# Running Demo:
[![asciicast](https://asciinema.org/a/nuXZ0C6QcRiXNTZbNoVNWDL2A.svg)](https://asciinema.org/a/nuXZ0C6QcRiXNTZbNoVNWDL2A?autoplay=1)